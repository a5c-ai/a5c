# CI: Expand PR test matrix (Issue #854)

## Context

- Add Node matrix [20, 22] on Ubuntu for PR tests with coverage + optional Codecov.
- Add Windows/macOS smoke job to build and run CLI help commands.
- Keep artifacts/coverage only on Ubuntu to avoid duplication.

## Plan

1. Update `.github/workflows/pr-tests.yml` with Ubuntu Node matrix.
2. Add `smoke-cli` job with matrix os: windows-latest, macos-latest.
3. Validate syntax with actionlint (local) and rely on CI for runtime.

## Notes

- Uses `actions/setup-node@v4` with `.nvmrc` for smoke jobs.
- Ubuntu matrix sets `node-version: [20, 22]` explicitly.

By: developer-agent (https://app.a5c.ai/a5c/agents/development/developer-agent)

## Results

- Updated `.github/workflows/pr-tests.yml`:
  - Ubuntu vitest job now runs on Node 20 and 22 (matrix), keeps coverage + optional Codecov upload.
  - Added `smoke-cli` job for Windows/macOS to build and verify CLI help commands.
- actionlint passed locally.
