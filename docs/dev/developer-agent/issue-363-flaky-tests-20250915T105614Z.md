# Flaky Tests Detector - Planning (Issue #363)

## Goal

Parse JUnit (Vitest) artifacts from CI to identify intermittently failing tests, then surface a PR summary and apply a `flaky-test` label. Optional: per-test issues aggregation.

## Plan

- Ensure PR CI uploads `junit.xml` as artifact `vitest-junit`.
- New workflow `Flaky Tests` triggered by `workflow_run` for `Tests` and `PR Quick Tests`.
- On trigger, download `vitest-junit` artifacts for the last N runs on the same branch/PR.
- Parse JUnit XML and compute flakiness: test passes in some runs and fails in others.
- Comment on PR with summary and add/remove `flaky-test` label accordingly.
- Upload a JSON artifact with details.

## Notes

- Vitest retry details are not present in JUnit by default; weâ€™ll infer flakiness across runs.
- Window size N default: 5.
