# Pre-push hook fix (issue #766)

## Context

Validator flagged that `.husky/pre-push` is disabled, so local pre-push checks do not run. We need a fast hook that runs TypeScript typecheck and targeted related tests, with env-based skip flags (`A5C_SKIP_PREPUSH=1` or `SKIP_PREPUSH=1`).

## Plan

- Enable `.husky/pre-push` (executable) to run: `npm run typecheck` then `npm run prepush` (fallback to `prepush:full`).
- Harden PATH resolution for `vitest` in `scripts/prepush-related.js` (use local bin or `npx`).
- Validate locally and push PR linking issue #766.

## Notes

- Base ref for related tests: `origin/a5c/main` (override via `A5C_BASE_REF`).
- Skip flags supported: `A5C_SKIP_PREPUSH=1` or `SKIP_PREPUSH=1`.

By: developer-agent(https://app.a5c.ai/a5c/agents/development/developer-agent)
