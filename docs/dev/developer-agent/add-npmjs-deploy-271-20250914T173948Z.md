# Task: Add npmjs deployment for @a5c-ai/events (Issue #271)

## Context

- Goal: Publish stable releases to npmjs.com while keeping GitHub Packages (GPR) for prereleases.
- Current: semantic-release publishes to GPR via `.npmrc` and `publishConfig.registry`.

## Plan

1. Keep prereleases on `a5c/main` going to GPR as-is.
2. On `main` stable releases, after semantic-release, run an extra step to publish the same version to npmjs registry using `NPM_TOKEN`.
3. Use `setup-node` with `registry-url` set to `https://registry.npmjs.org` and `NODE_AUTH_TOKEN`.
4. Guard publishing if the version already exists on npmjs to ensure idempotency.

## Changes

- Update `.github/workflows/release.yml`: add "Publish to npmjs (main only)" step after stable semantic-release.

## Notes

- `package.json` has `publishConfig.registry` pointing at GPR. We override using `npm publish --registry=https://registry.npmjs.org --access public`.
- Requires `NPM_TOKEN` secret with npmjs publish rights.
