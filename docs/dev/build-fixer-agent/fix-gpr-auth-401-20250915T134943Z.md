# Fix: GPR auth 401 in Release (a5c/main)

### Context

- Failing run: https://github.com/a5c-ai/events/actions/runs/17735198058
- Job: Release â†’ step: "Release (a5c/main prerelease)"
- Error: npm error 401 Unauthorized - PUT https://npm.pkg.github.com/@a5c-ai%2fevents - unauthenticated: User cannot be authenticated with the token provided.

### Root Cause

- The prerelease step publishes to GitHub Packages (GPR) but exports `NPM_TOKEN` which in this repo is the npmjs.org token. That token is invalid for GPR, causing 401.
- `.npmrc` uses `${NPM_TOKEN}` for `//npm.pkg.github.com/:_authToken`, biasing semantic-release/npm to pick the wrong token when both are present.

### Plan

1. Change `.npmrc` to use `${NODE_AUTH_TOKEN}` for GPR auth.
2. In `.github/workflows/release.yml`, for the a5c/main prerelease step:
   - remove `NPM_TOKEN` env
   - set `NODE_AUTH_TOKEN` to `${{ secrets.A5C_AGENT_GITHUB_TOKEN || secrets.GITHUB_TOKEN }}`
3. Keep npmjs publish (main) as-is using `NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}`.
4. Validate locally (build) and open PR.

### Verification

- semantic-release on a5c/main should publish to GPR using GITHUB_TOKEN.
- main publish to npmjs remains unaffected.
