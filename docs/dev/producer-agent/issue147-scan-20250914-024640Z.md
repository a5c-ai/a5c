# Producer Scan â€“ Issue #147

## Context
- Specs: docs/specs/README.md present; NE schema at docs/specs/ne.schema.json
- Phase: Specification Phase (docs/producer/phases/current-phase.txt)
- CLI: src/cli.ts with commands: mentions, normalize, enrich
- Enrichment via src/enrichGithubEvent.js with GitHub API usage

## Preliminary Gaps
1) Missing `events validate` command to validate NE JSON against `docs/specs/ne.schema.json`.
2) Composed events/rules engine not implemented; CLI accepts `--rules` but no processing of rules or `.composed` output.
3) Mention extraction does not scan code comments in changed files (spec suggests optional language-aware scanning of changed files).
4) Enrichment flags: default for include_patch differs from spec (spec defaults false; code defaults true; CLI allows control via flags but default is true).
5) Tests: add coverage for enrichment flags (commit_limit, file_limit, include_patch=false) and PR conflict detection mapping to `has_conflicts` derived field.
6) Docs: CLI reference mentions `emit` command in tech specs but CLI lacks it.

## Next Steps
- Open issues for each gap with acceptance criteria and labels.
- Follow up PRs by developer-agent.

