[install] Node dependencies

> @a5c-ai/events@1.1.0-a5c-main.9 prepare
> npm run build


> @a5c-ai/events@1.1.0-a5c-main.9 build
> tsc -p tsconfig.build.json && node scripts/build-post.js


added 661 packages in 7s
[install] Done.
[build] Running npm run build
[test] Running test:ci (vitest)

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/home/runner/work/events/events[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m tests/mentions.code-comments.test.ts [2m([22m[2m8 tests[22m[2m)[22m[90m 13[2mms[22m[39m
 [32mâœ“[39m tests/enrichGithubEvent.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 10[2mms[22m[39m
 [32mâœ“[39m tests/enrich.basic.test.ts [2m([22m[2m9 tests[22m[2m)[22m[90m 75[2mms[22m[39m
 [32mâœ“[39m tests/rules.composed.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 38[2mms[22m[39m
 [32mâœ“[39m tests/normalize.github.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32mâœ“[39m tests/normalize.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 9[2mms[22m[39m
 [32mâœ“[39m tests/cli.select-filter.test.ts [2m([22m[2m5 tests[22m[2m)[22m[90m 34[2mms[22m[39m
 [32mâœ“[39m tests/composed.rules.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 44[2mms[22m[39m
 [32mâœ“[39m test/redact.test.ts [2m([22m[2m7 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mâœ“[39m tests/config.token.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 17[2mms[22m[39m
 [32mâœ“[39m tests/normalize.schema.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 5[2mms[22m[39m
 [32mâœ“[39m tests/cli.enrich.flags.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 3066[2mms[22m[39m
   [33m[2mâœ“[22m[39m enrich flags: include_patch[2m > [22minclude_patch=true keeps patch fields (when files exist) [33m1561[2mms[22m[39m
   [33m[2mâœ“[22m[39m enrich flags: include_patch[2m > [22minclude_patch=false removes patch fields (when files exist) [33m1503[2mms[22m[39m
 [32mâœ“[39m tests/enrich.flags.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 3054[2mms[22m[39m
   [33m[2mâœ“[22m[39m enrich flags: include_patch default and override[2m > [22mdefault include_patch=false removes patch from files (when files exist) [33m1547[2mms[22m[39m
   [33m[2mâœ“[22m[39m enrich flags: include_patch default and override[2m > [22minclude_patch=true preserves patch in files (when files exist) [33m1504[2mms[22m[39m
 [32mâœ“[39m tests/enrich.handle.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 1536[2mms[22m[39m
   [33m[2mâœ“[22m[39m handleEnrich integrates enrichGithubEvent[2m > [22mmaps PR enrichment under enriched.github and respects include_patch=false [33m1534[2mms[22m[39m
 [32mâœ“[39m tests/cli.validate.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 520[2mms[22m[39m
   [33m[2mâœ“[22m[39m events validate (CLI)[2m > [22mvalidates a normalized sample and returns valid: true [33m322[2mms[22m[39m
 [32mâœ“[39m tests/ne.schema.compile.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 43[2mms[22m[39m
 [32mâœ“[39m test/enrich.redaction.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 60[2mms[22m[39m
 [32mâœ“[39m test/config.loadConfig.test.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [31mâ¯[39m tests/cli.rules-composed.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 637[2mms[22m[39m
[31m   [31mÃ—[31m CLI enrich with --rules emits composed events[2m > [22mproduces composed[].key from YAML rules[33m 636[2mms[22m[31m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
 [32mâœ“[39m tests/redaction.regression.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mâœ“[39m test/config.precedence.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32mâœ“[39m tests/cli.readme.examples.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 365[2mms[22m[39m
 [32mâœ“[39m tests/cli.exit-codes.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 2373[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22mnormalize: exits 2 when --in is missing (source=cli) [33m554[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22mnormalize: exits 2 on invalid JSON input [33m562[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22menrich: exits 3 when --use-github is set but no token (provider failure) [33m623[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22menrich: exits 0 without --use-github even when no token [33m632[2mms[22m[39m
 [32mâœ“[39m tests/ne.zod.schema.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 8[2mms[22m[39m
 [32mâœ“[39m tests/cli.select-filter.e2e.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1179[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI select/filter[2m > [22mnormalize --select type,repo.full_name [33m556[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI select/filter[2m > [22menrich --filter enriched.github.pr.mergeable_state=dirty (may be filtered depending on enrichment) [33m621[2mms[22m[39m
 [32mâœ“[39m tests/cli.enrich.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 638[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI enrich (smoke)[2m > [22mreads a sample and outputs enriched event shape [33m636[2mms[22m[39m
 [32mâœ“[39m tests/mentions.pr-body.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mâœ“[39m tests/cli.normalize.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 560[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI normalize (smoke)[2m > [22mreads a sample and outputs normalized event shape [33m558[2mms[22m[39m
 [32mâœ“[39m tests/mentions-code-comments.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 6[2mms[22m[39m
{
  "ref": "refs/heads/a5c/main",
  "before": "1111111111111111111111111111111111111111",
  "after": "2222222222222222222222222222222222222222",
  "repository": {
    "id": 1055826069,
    "name": "events",
    "full_name": "a5c-ai/events",
    "private": true
  },
  "pusher": {
    "name": "a5c-ai[bot]",
    "email": "agent@a5c.ai"
  },
  "sender": {
    "login": "a5c-ai[bot]",
    "type": "Bot",
    "id": 221166651
  },
  "created": false,
  "deleted": false,
  "forced": false,
  "commits": [
    {
      "id": "2222222222222222222222222222222222222222",
      "message": "chore: update docs",
      "timestamp": "2025-09-13T10:45:00Z"
    },
    {
      "id": "3333333333333333333333333333333333333333",
      "message": "feat: add samples @developer-agent",
      "timestamp": "2025-09-13T10:46:00Z"
    },
    {
      "id": "4444444444444444444444444444444444444444",
      "message": "fix: CI tweaks",
      "timestamp": "2025-09-13T10:47:00Z"
    }
  ],
  "head_commit": {
    "id": "2222222222222222222222222222222222222222",
    "message": "chore: update docs"
  }
}
 [32mâœ“[39m tests/emit.basic.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 9[2mms[22m[39m
 [32mâœ“[39m tests/config.token-precedence.test.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 5[2mms[22m[39m
 [32mâœ“[39m tests/golden.normalize.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 14[2mms[22m[39m
 [32mâœ“[39m tests/golden.enrich.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 53[2mms[22m[39m
 [32mâœ“[39m tests/normalize.basic.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mâœ“[39m tests/mentions.pr-title.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 55[2mms[22m[39m
 [32mâœ“[39m tests/mentions.commit.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 4[2mms[22m[39m
 [32mâœ“[39m tests/enrich.redaction.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 48[2mms[22m[39m
 [32mâœ“[39m tests/redact.patterns.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32mâœ“[39m test/sum.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 4[2mms[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m38 passed[39m[22m[90m (39)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m104 passed[39m[22m[90m (105)[39m
[2m   Start at [22m 18:20:27
[2m   Duration [22m 8.98s[2m (transform 445ms, setup 0ms, collect 2.02s, tests 14.53s, environment 13ms, prepare 3.53s)[22m

