[install] Node dependencies

> @a5c-ai/events@1.1.0-a5c-main.9 prepare
> npm run build


> @a5c-ai/events@1.1.0-a5c-main.9 build
> tsc -p tsconfig.build.json && node scripts/build-post.js


added 661 packages in 7s
[install] Done.
[build] Running npm run build
[test] Running test:ci (vitest)

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90m/home/runner/work/events/events[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [31mâ¯[39m tests/enrichGithubEvent.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m tests/mentions.code-comments.test.ts [2m([22m[2m8 tests[22m[2m)[22m[90m 12[2mms[22m[39m
 [31mâ¯[39m tests/enrich.basic.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[90m 45[2mms[22m[39m
[31m   [31mÃ—[31m handleEnrich[2m > [22madds code_comment mentions when enrichment contains files[90m 7[2mms[22m[31m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
 [32mâœ“[39m tests/cli.enrich.flags.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 19[2mms[22m[39m
 [32mâœ“[39m tests/enrich.flags.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 18[2mms[22m[39m
 [32mâœ“[39m tests/rules.composed.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 23[2mms[22m[39m
 [32mâœ“[39m tests/normalize.github.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 8[2mms[22m[39m
 [32mâœ“[39m tests/normalize.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 16[2mms[22m[39m
 [32mâœ“[39m tests/cli.select-filter.test.ts [2m([22m[2m5 tests[22m[2m)[22m[90m 26[2mms[22m[39m
 [32mâœ“[39m tests/composed.rules.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 39[2mms[22m[39m
 [32mâœ“[39m test/redact.test.ts [2m([22m[2m7 tests[22m[2m)[22m[90m 10[2mms[22m[39m
 [32mâœ“[39m tests/config.token.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 26[2mms[22m[39m
 [32mâœ“[39m tests/normalize.schema.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 8[2mms[22m[39m
 [32mâœ“[39m tests/enrich.handle.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 16[2mms[22m[39m
 [32mâœ“[39m tests/ne.schema.compile.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 57[2mms[22m[39m
 [32mâœ“[39m tests/cli.validate.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 479[2mms[22m[39m
   [33m[2mâœ“[22m[39m events validate (CLI)[2m > [22mvalidates a normalized sample and returns valid: true [33m319[2mms[22m[39m
 [32mâœ“[39m test/enrich.redaction.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 21[2mms[22m[39m
 [31mâ¯[39m tests/cli.rules-composed.test.ts [2m([22m[2m1 test[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 573[2mms[22m[39m
[31m   [31mÃ—[31m CLI enrich with --rules emits composed events[2m > [22mproduces composed[].key from YAML rules[33m 571[2mms[22m[31m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
 [32mâœ“[39m test/config.loadConfig.test.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 4[2mms[22m[39m
 [32mâœ“[39m tests/redaction.regression.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 5[2mms[22m[39m
 [32mâœ“[39m test/config.precedence.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 6[2mms[22m[39m
 [32mâœ“[39m tests/cli.readme.examples.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 295[2mms[22m[39m
 [32mâœ“[39m tests/cli.exit-codes.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 2079[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22mnormalize: exits 2 when --in is missing (source=cli) [33m512[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22mnormalize: exits 2 on invalid JSON input [33m545[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22menrich: exits 3 when --use-github is set but no token (provider failure) [33m506[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI exit codes[2m > [22menrich: exits 0 without --use-github even when no token [33m515[2mms[22m[39m
 [32mâœ“[39m tests/ne.zod.schema.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 9[2mms[22m[39m
 [32mâœ“[39m tests/cli.select-filter.e2e.test.ts [2m([22m[2m2 tests[22m[2m)[22m[33m 1024[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI select/filter[2m > [22mnormalize --select type,repo.full_name [33m509[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI select/filter[2m > [22menrich --filter enriched.github.pr.mergeable_state=dirty (may be filtered depending on enrichment) [33m513[2mms[22m[39m
 [32mâœ“[39m tests/cli.enrich.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 494[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI enrich (smoke)[2m > [22mreads a sample and outputs enriched event shape [33m492[2mms[22m[39m
 [32mâœ“[39m tests/mentions.pr-body.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mâœ“[39m tests/mentions-code-comments.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [32mâœ“[39m tests/cli.normalize.test.ts [2m([22m[2m1 test[22m[2m)[22m[33m 525[2mms[22m[39m
   [33m[2mâœ“[22m[39m CLI normalize (smoke)[2m > [22mreads a sample and outputs normalized event shape [33m522[2mms[22m[39m
{
  "ref": "refs/heads/a5c/main",
  "before": "1111111111111111111111111111111111111111",
  "after": "2222222222222222222222222222222222222222",
  "repository": {
    "id": 1055826069,
    "name": "events",
    "full_name": "a5c-ai/events",
    "private": true
  },
  "pusher": {
    "name": "a5c-ai[bot]",
    "email": "agent@a5c.ai"
  },
  "sender": {
    "login": "a5c-ai[bot]",
    "type": "Bot",
    "id": 221166651
  },
  "created": false,
  "deleted": false,
  "forced": false,
  "commits": [
    {
      "id": "2222222222222222222222222222222222222222",
      "message": "chore: update docs",
      "timestamp": "2025-09-13T10:45:00Z"
    },
    {
      "id": "3333333333333333333333333333333333333333",
      "message": "feat: add samples @developer-agent",
      "timestamp": "2025-09-13T10:46:00Z"
    },
    {
      "id": "4444444444444444444444444444444444444444",
      "message": "fix: CI tweaks",
      "timestamp": "2025-09-13T10:47:00Z"
    }
  ],
  "head_commit": {
    "id": "2222222222222222222222222222222222222222",
    "message": "chore: update docs"
  }
}
 [32mâœ“[39m tests/emit.basic.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 9[2mms[22m[39m
 [32mâœ“[39m tests/config.token-precedence.test.ts [2m([22m[2m3 tests[22m[2m)[22m[90m 4[2mms[22m[39m
 [32mâœ“[39m tests/golden.normalize.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 14[2mms[22m[39m
 [32mâœ“[39m tests/golden.enrich.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 21[2mms[22m[39m
 [32mâœ“[39m tests/normalize.basic.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 5[2mms[22m[39m
 [32mâœ“[39m tests/mentions.pr-title.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 20[2mms[22m[39m
 [32mâœ“[39m tests/mentions.commit.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 5[2mms[22m[39m
 [32mâœ“[39m tests/enrich.redaction.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 16[2mms[22m[39m
 [32mâœ“[39m tests/redact.patterns.test.ts [2m([22m[2m2 tests[22m[2m)[22m[90m 5[2mms[22m[39m
 [32mâœ“[39m test/sum.test.ts [2m([22m[2m1 test[22m[2m)[22m[90m 3[2mms[22m[39m

[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m36 passed[39m[22m[90m (39)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m101 passed[39m[22m[90m (103)[39m
[2m   Start at [22m 18:11:52
[2m   Duration [22m 6.43s[2m (transform 511ms, setup 0ms, collect 2.16s, tests 5.95s, environment 15ms, prepare 3.82s)[22m

